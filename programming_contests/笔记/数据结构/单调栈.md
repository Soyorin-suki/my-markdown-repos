# 单调栈
单调栈是一种数据结构，与单调队列类似，它可以在$O(n)$的时间复杂度内解决NGE问题(Next Greater Element)，也就是对序列内的每个元素，找到下一个比它大的元素。

我们维护一个栈，表示**待确定NGE的元素**，然后我们遍历序列，每找到一个如果小于等于栈顶就加入栈，否则就说明这个元素就是栈顶的NGE，将栈顶元素的NGE更新为该元素，并弹出栈顶，再检查下一个栈顶元素，直到栈空或栈顶元素大于等于该元素，之后再将元素加入栈顶

P5788 [模版]单调栈
> 给出项数为$n$的一个序列$\{a\}$，设$f(x)$为第$i$个元素后大于$a_i$的第一个元素的下标，若不存在，则$f(i)=0$，求$f(1),f(2),\dots f(n)$
> $1\le n\le 3e6,1\le a_i\le 1e9$

```c++
stack<ll>stk;
for(ll i=n;i>0;--i){
	while(!stk.empty()&&a[stk.top()]<=a[i])stk.pop();
	NGE[i]=stk.empty()?0:stk.top();
	stk.push(i);
}
for(ll i=1;i<=n;++i)
	cout<<NGE[i]<<' ';
cout<<endl;
```
也可以单调栈优化dp



参考：https://zhuanlan.zhihu.com/p/346536592